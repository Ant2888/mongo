---
- hosts: shardnofail:shardfail
  remote_user: "{{ ansible_user }}"
  vars:
    ansible_python_interpreter: '/usr/bin/python3'
  tasks:
    - name: Copying over config
      copy:
        src: sharddb.conf
        dest: /data/sharddb.conf
        owner: "{{ ansible_user }}"
        group: "{{ ansible_user }}"
    
    - name: Creating non-existing dirs
      file:
        path: "{{ item }}"
        state: directory
        mode: 0777
        group: "{{ ansible_user }}"
        owner: "{{ ansible_user }}"
      with_items:
      - ["/data/shard1", "/data/shard2"]
